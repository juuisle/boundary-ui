<Rose::Layout::Page as |page|>

  <page.breadcrumbs>
    <BreadCrumbs />
  </page.breadcrumbs>

  <page.header>
    <h2>
      {{t 'resources.host-catalog.title_plural'}}
      <DocLink @doc='host-catalog' @iconSize='large' />
    </h2>
    {{#if @model}}
      <p>{{t 'resources.host-catalog.description'}}</p>
    {{/if}}
  </page.header>

  <page.actions>
    {{#if (can 'create collection' this.scope collection='host-catalogs')}}
      {{#if @model}}
        <Rose::LinkButton
          @route='scopes.scope.host-catalogs.new'
          @style='primary'
        >
          {{t 'titles.new'}}
        </Rose::LinkButton>
      {{/if}}
    {{/if}}
  </page.actions>

  <page.body>

    {{#if @model}}
   <div style='display: flex;'>
        <Rose::Form 
          @onSubmit={{route-action 'filterHostCatalogs'}}
          as |form|>
          <form.input
            @name='search'
            @type='text'
            @value={{@model.name}}
            @label={{t 'form.search.label'}}
            style='width:40%'
          />
          <Rose::Button
            @style='secondary'
            title={{t 'search'}}
            {{on 'click' (route-action 'search' @model.name)}}
          >
           search
          </Rose::Button>
        </Rose::Form>
        <div>
          <Rose::Dropdown
@text={{t 'resources.host-catalog.filter.id'}} 
@showCaret={{true}} as |dropdown|
>
            <dropdown.section @title='id'>
              <Rose::Form as |form|>
                 
                <form.radioGroup
                  @name='id'
                  @selectedValue={{group.id}}
                  @changed={{route-action 'filterGroups'}}
                  as |radioGroup|
                >
                {{#each this.availableGroups as |group|}}
                 <dropdown.item>
                    <radioGroup.radio 
                      @label={{group.id}}
                      {{!-- onChange={{route-action 'filterGroups' group.id}}  --}}
                      @value={{group.id}}/>
                  </dropdown.item>
                 {{/each}}
                  
                  {{!-- <dropdown.item>
                    <radioGroup.radio
                      @label={{t 'themes.light'}}
                      @value='light'
                    />
                  </dropdown.item>
                  <dropdown.item>
                    <radioGroup.radio
                      @label={{t 'themes.dark'}}
                      @value='dark'
                    />
                  </dropdown.item> --}}
                </form.radioGroup>
              </Rose::Form>
            </dropdown.section>
</Rose::Dropdown>

          {{!-- <Rose::Form as |form|>
            <Rose::Dropdown @text={{t 'resources.group.filter.id'}}  @ignoreClickInside={{true}} @showCaret={{true}} as |dropdown|>
              {{#each this.availableGroups as |group|}}
                <dropdown.item>
                  <form.checkbox
                    @name={{concat 'checkbox-' group.id}}
                    @label={{group.id}}
                    @disabled={{false}}
                    @inline={{false}}
                    onChange={{route-action 'filterGroups' group.id}}
                  />
                </dropdown.item>
              {{/each}}
            </Rose::Dropdown>

          </Rose::Form> --}}
          {{!-- <Rose::Dropdown
            @text={{t 'resources.group.filter.name'}}
            @dropdownRight={{true}}
            as |dropdown|
          >
            <Rose::Form as |form|>
              {{#each this.availableGroups as |group|}}
                <dropdown.item>
                  <form.checkbox
                    @name={{concat 'checkbox-' group.name}}
                    @disabled={{false}}
                    @label={{group.name}}
                    @inline={{false}}
                    onChange={{route-action 'filterGroups' group.id}}
                  />
                </dropdown.item>
              {{/each}}
            </Rose::Form>
          </Rose::Dropdown> --}}
        </div>
      </div>

      <Rose::Table as |table|>
        <table.header as |header|>
          <header.row as |row|>
            <row.headerCell>{{t 'form.name.label'}}</row.headerCell>
            <row.headerCell>{{t 'form.type.label'}}</row.headerCell>
            <row.headerCell>{{t 'form.id.label'}}</row.headerCell>
          </header.row>
        </table.header>
        <table.body as |body|>
          {{#each @model as |hostCatalog|}}
            <body.row as |row|>
              <row.headerCell>
                {{#if (can 'read model' hostCatalog)}}
                  <LinkTo
                    @route='scopes.scope.host-catalogs.host-catalog'
                    @model={{hostCatalog.id}}
                  >
                    {{hostCatalog.displayName}}
                  </LinkTo>
                {{else}}
                  {{hostCatalog.displayName}}
                {{/if}}
                <p>{{hostCatalog.description}}</p>
              </row.headerCell>
              <row.cell>
                <Rose::Badge>
                  {{t
                    (concat 'resources.host-catalog.types.' hostCatalog.type)
                  }}
                </Rose::Badge>
              </row.cell>
              <row.cell>
                <Copyable
                  @text={{hostCatalog.id}}
                  @buttonText={{t 'actions.copy-to-clipboard'}}
                  @acknowledgeText={{t 'states.copied'}}
                >
                  <code>{{hostCatalog.id}}</code>
                </Copyable>
              </row.cell>
            </body.row>
          {{/each}}
        </table.body>
      </Rose::Table>

    {{else}}

      <Rose::Layout::Centered>
        <Rose::Message
          @title={{t 'resources.host-catalog.messages.welcome.title'}}
          as |message|
        >
          <message.description>
            {{#if
              (can 'list collection' this.scope collection='host-catalogs')
            }}
              {{! can list (at least):  show default welcome message}}
              {{t 'resources.host-catalog.description'}}
            {{else if (can
              'create collection' this.scope collection='host-catalogs'
            )}}
              {{! can create (only):  show create-but-not-list welcome message}}
              {{t
                'descriptions.create-but-not-list'
                resource=(t 'resources.host-catalog.title_plural')
              }}
            {{else}}
              {{! can neither list nor create }}
              {{t
                'descriptions.neither-list-nor-create'
                resource=(t 'resources.host-catalog.title_plural')
              }}
            {{/if}}
          </message.description>
          {{#if
            (can 'create collection' this.scope collection='host-catalogs')
          }}
            <message.link @route='scopes.scope.host-catalogs.new'>
              <Rose::Icon @name='flight-icons/plus-circle-16' />
              {{t 'titles.new'}}
            </message.link>
          {{/if}}
        </Rose::Message>
      </Rose::Layout::Centered>

    {{/if}}

  </page.body>

</Rose::Layout::Page>